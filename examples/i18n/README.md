# i18n with travelm-agency (inline mode)

This example demonstrates internationalization in Elm using [travelm-agency](https://github.com/anmolitor/travelm-agency) in inline mode. All translations are embedded in the generated Elm code at compile time.
For more details about all travelm-agency features, see the [travelm-agency.md](travelm-agency.md) file.

## How it works

Translation files (`translations/messages.en.json`, `translations/messages.fr.json`) define keys with optional `{placeholder}` interpolation. Running travelm-agency generates `src/Translations.elm` with:

- A `Language` union type (`En | Fr`) with `languageFromString` / `languageToString` converters
- An opaque `I18n` type initialized via `init : Language -> I18n`
- One accessor function per translation key (e.g. `greeting : String -> I18n -> String`)

The Elm app receives `navigator.languages` as flags, iterates them with `languageFromString` to detect the best match, and defaults to English. A `setLang` port updates `document.documentElement.lang` on language switch.

## Key patterns

- **Language detection**: iterate `navigator.languages`, call `languageFromString` on each tag, take first match
- **Language switching** (inline mode): just reinitialize with `Translations.init newLang`
- **Interpolation**: keys like `"Hello, {name}!"` generate `greeting : String -> I18n -> String`
- **HTML lang attribute**: kept in sync via `port setLang : String -> Cmd msg`

## Running the example

Generate `Translations.elm` (already checked in, only needed if you change translation files):

```sh
npm install
npx travelm-agency translations --elm_path=src/Translations.elm --inline
```

Compile and serve:

```sh
elm make src/Main.elm --output=static/elm.js
cd static
python3 -m http.server 8000
```

Open `http://localhost:8000` in your browser.

## Project structure

```
i18n/
  elm.json                  -- Elm dependencies
  translations/
    messages.en.json        -- English translations
    messages.fr.json        -- French translations
  src/
    Main.elm                -- Elm app: language detection, switching, interpolation
    Translations.elm        -- Generated by travelm-agency (checked in)
  static/
    index.html              -- HTML shell with JS port wiring
    elm.js                  -- compiled Elm output (generated)
```
